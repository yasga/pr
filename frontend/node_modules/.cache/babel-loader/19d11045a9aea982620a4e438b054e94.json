{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\user\\\\Desktop\\\\m\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _asyncToGenerator from\"C:\\\\Users\\\\user\\\\Desktop\\\\m\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\user\\\\Desktop\\\\m\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useContext}from'react';import{Store}from'../Store';import{Helmet}from'react-helmet-async';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import MessageBox from'../components/MessageBox';import ListGroup from'react-bootstrap/ListGroup';import Button from'react-bootstrap/Button';import Card from'react-bootstrap/Card';import{Link,useNavigate}from'react-router-dom';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CartScreen(){var navigate=useNavigate();var _useContext=useContext(Store),state=_useContext.state,ctxDispatch=_useContext.dispatch;var cartItems=state.cart.cartItems;var updateCartHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(item,quantity){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/products/\".concat(item._id));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;if(!(data.countInStock<quantity)){_context.next=7;break;}window.alert('Désolé. Le produit est en rupture de stock');return _context.abrupt(\"return\");case 7:ctxDispatch({type:'CART_ADD_ITEM',payload:_objectSpread(_objectSpread({},item),{},{quantity:quantity})});case 8:case\"end\":return _context.stop();}}},_callee);}));return function updateCartHandler(_x,_x2){return _ref.apply(this,arguments);};}();var removeItemHandler=function removeItemHandler(item){ctxDispatch({type:'CART_REMOVE_ITEM',payload:item});};var checkoutHandler=function checkoutHandler(){navigate('/signin?redirect=/shipping');};function changeBackground(e){e.target.style.color='#121212';}function returnBackground(e){e.target.style.color='#494848';}function MouseOver(event){event.target.style.background='black';}function MouseOut(event){event.target.style.background=\"#121212\";}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Panier\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"h1\",{className:\"title\",children:[\"R\\xE9sum\\xE9 De L'article( \",cartItems.reduce(function(a,c){return a+c.quantity;},0),' ',\")\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Col,{md:8,children:/*#__PURE__*/_jsxs(ListGroup,{horizontal:true,children:[/*#__PURE__*/_jsx(Col,{className:\"a\",md:4,children:\"Articles(s)\"}),/*#__PURE__*/_jsx(Col,{className:\"a\",md:3,children:\"Quantit\\xE9(s)\"}),/*#__PURE__*/_jsx(Col,{className:\"a\",md:3,children:\"Prix\"}),/*#__PURE__*/_jsx(Col,{className:\"a\",md:2,children:\"Effacer\"})]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,children:cartItems.length===0?/*#__PURE__*/_jsxs(MessageBox,{children:[\"Le panier est vide. \",/*#__PURE__*/_jsx(Link,{className:\"link1\",onMouseOver:changeBackground,onMouseOut:returnBackground,to:\"/\",children:\"Aller faire les courses\"})]}):/*#__PURE__*/_jsx(ListGroup,{children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsxs(Col,{md:4,children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"img-fluid rounded img-thumbnail\"}),' ',/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.slug),className:\"link1\",onMouseOver:changeBackground,onMouseOut:returnBackground,children:item.name})]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return updateCartHandler(item,item.quantity-1);},variant:\"light\",disabled:item.quantity===1,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-minus-circle\"})}),' ',/*#__PURE__*/_jsx(\"span\",{children:item.quantity}),' ',/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:function onClick(){return updateCartHandler(item,item.quantity+1);},disabled:item.quantity===item.countInStock,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus-circle\"})})]}),/*#__PURE__*/_jsxs(Col,{md:3,className:\"p\",children:[item.price,\"DH\"]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{className:\"b\",onClick:function onClick(){return removeItemHandler(item);},variant:\"light\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item._id);})})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"f1\",children:\"R\\xE9sum\\xE9 De Votre Commande\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"f2\",children:[\"Subtotal:\",/*#__PURE__*/_jsxs(\"span\",{className:\"f3\",children:[\"  \",cartItems.reduce(function(a,c){return a+c.price*c.quantity;},0),\" DH \"]})]})]}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Button,{onMouseOver:MouseOver,onMouseOut:MouseOut,className:\"btn\",type:\"button\",variant:\"primary\",onClick:checkoutHandler,disabled:cartItems.length===0,children:\"Payer\"})})})]})})})})]})]});}","map":{"version":3,"sources":["C:/Users/user/Desktop/m/frontend/src/screens/CartScreen.js"],"names":["useContext","Store","Helmet","Row","Col","MessageBox","ListGroup","Button","Card","Link","useNavigate","axios","CartScreen","navigate","state","ctxDispatch","dispatch","cartItems","cart","updateCartHandler","item","quantity","get","_id","data","countInStock","window","alert","type","payload","removeItemHandler","checkoutHandler","changeBackground","e","target","style","color","returnBackground","MouseOver","event","background","MouseOut","reduce","a","c","length","map","image","name","slug","price"],"mappings":"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","sourcesContent":["import { useContext } from 'react';\r\nimport { Store } from '../Store';\r\nimport { Helmet } from 'react-helmet-async';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport MessageBox from '../components/MessageBox';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Card from 'react-bootstrap/Card';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nexport default function CartScreen() {\r\n  const navigate = useNavigate();\r\n  const { state, dispatch: ctxDispatch } = useContext(Store);\r\n  const {\r\n    cart: { cartItems },\r\n  } = state;\r\n\r\n  const updateCartHandler = async (item, quantity) => {\r\n    const { data } = await axios.get(`/api/products/${item._id}`);\r\n    if (data.countInStock < quantity) {\r\n      window.alert('Désolé. Le produit est en rupture de stock');\r\n      return;\r\n    }\r\n    ctxDispatch({\r\n      type: 'CART_ADD_ITEM',\r\n      payload: { ...item, quantity },\r\n    });\r\n  };\r\n  const removeItemHandler = (item) => {\r\n    ctxDispatch({ type: 'CART_REMOVE_ITEM', payload: item });\r\n  };\r\n\r\n  const checkoutHandler = () => {\r\n    navigate('/signin?redirect=/shipping');\r\n  };\r\n\r\n  function changeBackground(e) {\r\n    e.target.style.color = '#121212';\r\n  }\r\n\r\n  function returnBackground(e) {\r\n    e.target.style.color = '#494848';\r\n  }\r\n  function MouseOver(event) {\r\n    event.target.style.background = 'black';\r\n  }\r\n  function MouseOut(event){\r\n    event.target.style.background=\"#121212\";\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Helmet>\r\n        <title>Panier</title>\r\n      </Helmet>\r\n      <br></br><br></br>\r\n      <h1 className='title'>Résumé De L'article( {cartItems.reduce((a, c) => a + c.quantity, 0)}{' '})</h1>\r\n      <br></br><br></br>\r\n      <Col md={8}>\r\n      <ListGroup horizontal>\r\n       \r\n      <Col className='a' md={4}>Articles(s)</Col>\r\n      <Col className='a' md={3}>Quantité(s)</Col>\r\n      <Col className='a' md={3}>Prix</Col>\r\n      <Col className='a' md={2}>Effacer</Col>\r\n     \r\n      </ListGroup>\r\n      </Col>\r\n      <br></br>\r\n      <Row>\r\n        <Col md={8}>\r\n          {cartItems.length === 0 ? (\r\n            <MessageBox>\r\n              Le panier est vide. <Link className=\"link1\" onMouseOver={changeBackground} onMouseOut={returnBackground}  to=\"/\">Aller faire les courses</Link>\r\n            </MessageBox>\r\n          ) : (\r\n            \r\n\r\n            <ListGroup>\r\n              {cartItems.map((item) => (\r\n                <ListGroup.Item key={item._id}>\r\n                  <Row className=\"align-items-center\">\r\n                    <Col md={4}>\r\n                      <img\r\n                        src={item.image}\r\n                        alt={item.name}\r\n                        className=\"img-fluid rounded img-thumbnail\"\r\n                        \r\n                      ></img>{' '}\r\n                      \r\n                      <Link  to={`/product/${item.slug}`} className=\"link1\" onMouseOver={changeBackground} onMouseOut={returnBackground} >{item.name}</Link>\r\n                      \r\n                    </Col>\r\n                    \r\n                    <Col md={3}>\r\n                      <Button\r\n                        onClick={() =>\r\n                          updateCartHandler(item, item.quantity - 1)\r\n                        }\r\n                        variant=\"light\"\r\n                        disabled={item.quantity === 1}\r\n                      >\r\n                        <i className=\"fas fa-minus-circle\"></i>\r\n                      </Button>{' '}\r\n                      <span>{item.quantity}</span>{' '}\r\n                      <Button\r\n                        variant=\"light\"\r\n                        onClick={() =>\r\n                          updateCartHandler(item, item.quantity + 1)\r\n                        }\r\n                        disabled={item.quantity === item.countInStock}\r\n                      >\r\n                        <i className=\"fas fa-plus-circle\"></i>\r\n                      </Button>\r\n                    </Col>\r\n                    <Col md={3} className=\"p\">{item.price}DH</Col>\r\n                    <Col md={2}>\r\n                      <Button className='b'\r\n                        onClick={() => removeItemHandler(item)}\r\n                        variant=\"light\"\r\n                      >\r\n                        <i className=\"fas fa-trash\"></i>\r\n                      </Button>\r\n                    </Col>\r\n                  </Row>\r\n                </ListGroup.Item>\r\n              ))}\r\n            </ListGroup>\r\n          )}\r\n        </Col>\r\n        <Col md={4}>\r\n          <Card>\r\n            <Card.Body>\r\n              <ListGroup variant=\"flush\">\r\n                <ListGroup.Item>\r\n                  <div className='f1'>Résumé De Votre Commande</div><br></br>\r\n                  <div className='f2'>\r\n                   Subtotal: \r\n                   <span className='f3' >  {cartItems.reduce((a, c) => a + c.price * c.quantity, 0)} DH </span> \r\n                  </div>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <div className=\"d-grid\">\r\n                    <Button\r\n                    onMouseOver={MouseOver} onMouseOut={MouseOut}\r\n                    className='btn'\r\n                      type=\"button\"\r\n                      variant=\"primary\"\r\n                      onClick={checkoutHandler}\r\n                      disabled={cartItems.length === 0}\r\n                    >\r\n                      Payer\r\n                    </Button>\r\n                  </div>\r\n                </ListGroup.Item>\r\n              </ListGroup>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n}"]},"metadata":{},"sourceType":"module"}