{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\user\\\\Desktop\\\\m\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\user\\\\Desktop\\\\m\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\user\\\\Desktop\\\\m\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import Axios from'axios';import Container from'react-bootstrap/Container';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';import{Helmet}from'react-helmet-async';import{useState,useReducer}from'react';//import { Store } from '../Store';\nimport{getError}from'../utils';import'../index.css';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var reducer=function reducer(state,action){switch(action.type){case'USER_FORGOT_PASSWORD_REQUEST':return{loading:true};case'USER_FORGOT_PASSWORD_SUCCESS':return{loading:false,message:action.payload.message};case'USER_FORGOT_PASSWORD_FAIL':return{loading:false,error:action.payload};case'USER_RESET_PASSWORD_REQUEST':return{loading:true};case'USER_RESET_PASSWORD_SUCCESS':return{loading:false,message:action.payload.message};case'USER_RESET_PASSWORD_FAIL':return{loading:false,error:action.payload};default:return state;}};export default function ForgotPasswordScreen(){var _useReducer=useReducer(reducer,{loading:false,error:''}),_useReducer2=_slicedToArray(_useReducer,2),_useReducer2$=_useReducer2[0],loading=_useReducer2$.loading,message=_useReducer2$.message,error=_useReducer2$.error,dispatch=_useReducer2[1];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _yield$Axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();dispatch({type:'USER_FORGOT_PASSWORD_REQUEST'});_context.prev=2;_context.next=5;return Axios.post('/api/users/forgotpassword',{email:email});case 5:_yield$Axios$post=_context.sent;data=_yield$Axios$post.data;dispatch({type:'USER_FORGOT_PASSWORD_SUCCESS',payload:data});_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);dispatch({type:'USER_FORGOT_PASSWORD_FAIL',payload:getError(error)});case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,10]]);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();function changeBackground(e){e.target.style.background='#121212';}function returnBackground(e){e.target.style.background='black';}return/*#__PURE__*/_jsxs(Container,{className:\"small-container\",children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Assistance du mot de passe\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"h1\",children:\"Assistance du mot de passe\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Saisissez l'adresse e-mail associ\\xE9e \\xE0 votre compte.\"}),error&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}),message&&/*#__PURE__*/_jsx(MessageBox,{variant:\"success\",children:message}),loading&&/*#__PURE__*/_jsx(LoadingBox,{}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",name:\"email\",required:true,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(Button,{onMouseOver:changeBackground,onMouseOut:returnBackground,className:\"btn1\",type:\"submit\",children:\"Continuer\"})})]})]});}","map":{"version":3,"sources":["C:/Users/user/Desktop/m/frontend/src/screens/ForgotPasswordScreen.js"],"names":["Axios","Container","Form","Button","Helmet","useState","useReducer","getError","LoadingBox","MessageBox","reducer","state","action","type","loading","message","payload","error","ForgotPasswordScreen","dispatch","email","setEmail","submitHandler","e","preventDefault","post","data","changeBackground","target","style","background","returnBackground","value"],"mappings":"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","sourcesContent":["import Axios from 'axios';\nimport Container from 'react-bootstrap/Container';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport { Helmet } from 'react-helmet-async';\nimport {  useState, useReducer } from 'react';\n//import { Store } from '../Store';\nimport { getError } from '../utils';\nimport '../index.css';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'USER_FORGOT_PASSWORD_REQUEST':\n      return { loading: true };\n  \n    case 'USER_FORGOT_PASSWORD_SUCCESS':\n      return { loading: false, message: action.payload.message };\n        \n    case 'USER_FORGOT_PASSWORD_FAIL':\n      return { loading: false, error: action.payload };\n        \n    case 'USER_RESET_PASSWORD_REQUEST':\n      return { loading: true };\n  \n    case 'USER_RESET_PASSWORD_SUCCESS':\n      return { loading: false, message: action.payload.message };\n  \n    case 'USER_RESET_PASSWORD_FAIL':\n      return { loading: false, error: action.payload };\n    default:\n      return state;\n  }\n};\n\nexport default function ForgotPasswordScreen() {\n\n  const [{ loading, message ,error}, dispatch] =\n  useReducer(reducer, {\n    loading: false,\n    error: '',\n  });\n\n  const [email, setEmail] = useState('');\n\n  const submitHandler = async (e) => {\n    e.preventDefault();\n    dispatch({ type: 'USER_FORGOT_PASSWORD_REQUEST' });\n    try {\n      const { data } = await Axios.post('/api/users/forgotpassword', {email});\n\n    \n      dispatch({ type: 'USER_FORGOT_PASSWORD_SUCCESS', payload: data });\n    } catch (err) {\n      dispatch({\n        type: 'USER_FORGOT_PASSWORD_FAIL',\n        payload: getError(error),\n      });\n    }\n  };\n\n  function changeBackground(e) {\n    e.target.style.background = '#121212';\n  }\n\n  function returnBackground(e) {\n    e.target.style.background = 'black';\n  }\n\n  return (\n    <Container className=\"small-container\">\n      <Helmet>\n        <title>Assistance du mot de passe</title>\n      </Helmet>\n      <h1 className=\"h1\">Assistance du mot de passe</h1>\n      <p>Saisissez l'adresse e-mail associée à votre compte.</p>\n\n      {error && <MessageBox variant=\"danger\">{error}</MessageBox>}\n      {message && <MessageBox variant=\"success\">{message}</MessageBox>}\n      {loading && <LoadingBox />}\n\n      <Form onSubmit={submitHandler}>\n        <Form.Group className=\"mb-3\" controlId=\"email\">\n          <Form.Label>Email</Form.Label>\n          <Form.Control\n            type=\"email\"\n            name=\"email\"\n            required\n            onChange={(e) => setEmail(e.target.value)}\n          />\n        </Form.Group>\n        <div className=\"mb-3\">\n          <Button onMouseOver={changeBackground} onMouseOut={returnBackground}  className='btn1' type=\"submit\">Continuer</Button>\n        </div>     \n      </Form>\n    </Container>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}